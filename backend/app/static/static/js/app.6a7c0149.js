(function(){"use strict";var e={6043:function(e,t,a){var o=a(3751),s=a(641);const r={class:"bg-background text-text min-h-screen"},i={class:"container mx-auto px-4 py-6"},n={class:"max-w-8xl mx-auto"};function l(e,t,a,o,l,c){const d=(0,s.g2)("AppHeader"),u=(0,s.g2)("LevelBar"),p=(0,s.g2)("QuestBoard"),b=(0,s.g2)("TaskManager"),g=(0,s.g2)("HabitTracker");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",i,[(0,s.bF)(d),(0,s.Lk)("main",n,[(0,s.bF)(u),(0,s.bF)(p),(0,s.bF)(b),(0,s.bF)(g)])])])}var c=a(33);const d={class:"mb-8 bg-accent bg-opacity-20 shadow-lg rounded-lg p-4 border-2 border-secondary"},u={class:"flex justify-between items-center"},p={class:"text-text font-semibold"},b={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},g={class:"bg-background rounded-lg p-6 w-96 border-4 border-secondary retro-shadow"},h={class:"mb-4"},f={class:"mb-4"},x=["onUpdate:modelValue"],m=["onClick"],k={class:"flex justify-end"};function y(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("header",d,[(0,s.Lk)("div",u,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openSettings&&n.openSettings(...e)),class:"text-primary hover:text-secondary transition-colors duration-300"},t[5]||(t[5]=[(0,s.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])),t[6]||(t[6]=(0,s.Lk)("h1",{class:"text-4xl font-bold text-primary",style:{"text-shadow":"2px 2px 4px rgba(0,0,0,0.1)"}},"Retro Task Manager",-1)),(0,s.Lk)("div",p,(0,c.v_)(i.username),1)]),i.showSettings?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",g,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"text-2xl font-bold text-primary mb-4"},"Settings",-1)),(0,s.Lk)("div",h,[t[7]||(t[7]=(0,s.Lk)("label",{for:"description",class:"block text-text font-medium mb-2"},"About You",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=e=>i.userDescription=e),rows:"3",class:"w-full px-3 py-2 text-text bg-accent bg-opacity-10 rounded border border-secondary focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Describe yourself..."},null,512),[[o.Jo,i.userDescription]])]),(0,s.Lk)("div",f,[t[8]||(t[8]=(0,s.Lk)("label",{class:"block text-text font-medium mb-2"},"Your Goals",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.goals,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"flex mb-2"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>i.goals[t]=e,type:"text",class:"flex-grow px-3 py-2 text-text bg-accent bg-opacity-10 rounded-l border border-secondary focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter a goal..."},null,8,x),[[o.Jo,i.goals[t]]]),(0,s.Lk)("button",{onClick:e=>n.removeGoal(t),class:"px-3 py-2 bg-red-500 text-white rounded-r hover:bg-red-600 transition-colors duration-300"}," X ",8,m)])))),128)),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.addGoal&&n.addGoal(...e)),class:"w-full px-3 py-2 bg-primary text-background rounded hover:bg-secondary transition-colors duration-300"}," Add Goal ")]),(0,s.Lk)("div",k,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.saveSettings&&n.saveSettings(...e)),class:"px-4 py-2 bg-primary text-background rounded hover:bg-secondary transition-colors duration-300 mr-2"}," Save "),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.closeSettings&&n.closeSettings(...e)),class:"px-4 py-2 bg-gray-300 text-text rounded hover:bg-gray-400 transition-colors duration-300"}," Cancel ")])])])):(0,s.Q3)("",!0)])}a(4114);const v={username:"Simmaco"};var L={name:"AppHeader",data(){return{username:v.username,showSettings:!1,userDescription:"",goals:[""]}},mounted(){this.loadSettings()},methods:{openSettings(){this.showSettings=!0},closeSettings(){this.showSettings=!1},addGoal(){this.goals.push("")},removeGoal(e){this.goals.splice(e,1)},saveSettings(){localStorage.setItem("userDescription",this.userDescription),localStorage.setItem("userGoals",JSON.stringify(this.goals.filter((e=>""!==e.trim())))),this.closeSettings()},loadSettings(){const e=localStorage.getItem("userDescription"),t=localStorage.getItem("userGoals");e&&(this.userDescription=e),t&&(this.goals=JSON.parse(t))}}},w=a(6262);const E=(0,w.A)(L,[["render",y],["__scopeId","data-v-19bbe25a"]]);var C=E;const D={class:"mb-8 bg-accent bg-opacity-20 shadow-lg rounded-lg p-6 border-2 border-secondary"},T={class:"mb-6"},A={class:"flex justify-between items-center mb-2"},_={class:"text-2xl font-bold text-primary"},H={class:"text-xl text-text"},S={class:"w-full bg-background rounded-full h-5 border-2 border-primary relative group"},I={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},N={class:"grid grid-cols-3 gap-4"},P={class:"flex items-center justify-between mb-1"},R={class:"font-semibold text-text text-sm"},U={class:"text-xs text-text"},j={class:"w-full bg-background rounded-full h-3 border border-secondary relative group"},O={class:"absolute inset-0 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-300"};function M(e,t,a,o,r,i){return(0,s.uX)(),(0,s.CE)("section",D,[(0,s.Lk)("div",T,[(0,s.Lk)("div",A,[(0,s.Lk)("span",_,"Livello "+(0,c.v_)(r.mainLevel),1),(0,s.Lk)("span",H,(0,c.v_)(r.mainExp)+" / "+(0,c.v_)(r.mainExpNeeded)+" XP",1)]),(0,s.Lk)("div",S,[(0,s.Lk)("div",{class:"bg-primary h-full rounded-full transition-all duration-500 ease-out",style:(0,c.Tr)({width:`${r.mainProgressPercentage}%`})},null,4),(0,s.Lk)("span",I," XP Totali: "+(0,c.v_)(r.totalMainExp),1)])]),(0,s.Lk)("div",N,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.skills,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.name,class:"skill-bar"},[(0,s.Lk)("div",P,[(0,s.Lk)("span",R,(0,c.v_)(e.name),1),(0,s.Lk)("span",U,"Lv. "+(0,c.v_)(e.level),1)]),(0,s.Lk)("div",j,[(0,s.Lk)("div",{class:"bg-secondary h-full rounded-full transition-all duration-500 ease-out",style:(0,c.Tr)({width:`${e.progressPercentage}%`})},null,4),(0,s.Lk)("span",O,(0,c.v_)(e.exp)+" / "+(0,c.v_)(e.expNeeded)+" XP ",1)])])))),128))])])}var X=a(4335),G={name:"LevelBar",data(){return{mainExp:0,totalMainExp:0,mainLevel:1,mainExpNeeded:100,mainProgressPercentage:0,skills:[{name:"CULTURE",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0},{name:"SPORT",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0},{name:"WELLBEING",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0},{name:"PRODUCTIVITY",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0},{name:"CREATIVITY",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0},{name:"SOCIAL",exp:0,totalExp:0,level:1,expNeeded:100,progressPercentage:0}]}},mounted(){this.fetchUserData(),this.startPolling()},beforeUnmount(){this.stopPolling()},methods:{calculateLevel(e){return Math.floor((e/100)**(2/3))+1},calculateExpNeeded(e){const t=Math.ceil(100*e**1.5);return 10*Math.ceil(t/10)},calculateExpForCurrentLevel(e){const t=this.calculateLevel(e),a=this.calculateExpNeeded(t-1);return e-a},updateSkillData(e){e.totalExp=Math.max(0,parseInt(e.totalExp)||0),e.level=this.calculateLevel(e.totalExp),e.expNeeded=this.calculateExpNeeded(e.level),e.exp=this.calculateExpForCurrentLevel(e.totalExp),e.progressPercentage=Math.min(100,Math.max(0,e.exp/e.expNeeded*100)),console.log(`Updated ${e.name}: Level ${e.level}, XP ${e.exp}/${e.expNeeded}, Total XP ${e.totalExp}`)},async fetchUserData(){try{const[e,t]=await Promise.all([X.A.get(`/api/user/${v.username}/general_xp`),X.A.get(`/api/user/${v.username}/skill_xp`)]);console.log("General XP:",e.data),console.log("Skill XP:",t.data),this.totalMainExp=Math.max(0,parseInt(e.data.general_xp)||0),this.mainLevel=this.calculateLevel(this.totalMainExp),this.mainExpNeeded=this.calculateExpNeeded(this.mainLevel),this.mainExp=this.calculateExpForCurrentLevel(this.totalMainExp),this.mainProgressPercentage=Math.min(100,Math.max(0,this.mainExp/this.mainExpNeeded*100));const a=t.data;this.skills.forEach((e=>{const t=e.name.toLowerCase();e.totalExp=Math.max(0,parseInt(a[`${t}_xp`])||0),this.updateSkillData(e)}))}catch(e){console.error("Error fetching user XP data:",e)}},startPolling(){this.pollingInterval=setInterval((()=>{this.fetchUserData()}),5e3)},stopPolling(){clearInterval(this.pollingInterval)}}};const Q=(0,w.A)(G,[["render",M],["__scopeId","data-v-45078dc0"]]);var V=Q;const q={class:"mb-4 bg-accent bg-opacity-20 shadow-lg rounded-lg p-3 border-2 border-secondary relative"},F={class:"flex justify-between items-center mb-2"},z={class:"flex space-x-2"},$=["onClick"],Y={class:"flex items-start"},B=["checked","onChange"],K={class:"flex-grow"},W={class:"flex justify-between items-start mb-1"},J={class:"text-sm font-medium text-text line-clamp-2 mr-2"},Z={class:"flex justify-end"},ee={class:"text-xs text-secondary font-semibold"},te={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ae={class:"bg-background rounded-lg p-4 w-80 border-4 border-secondary retro-shadow"},oe={class:"text-lg font-bold text-primary mb-2"},se={class:"text-sm text-text mb-3"},re={class:"flex justify-between items-center mb-3"},ie={class:"text-xs text-secondary font-semibold"},ne={class:"flex justify-end"};function le(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("section",q,[(0,s.Lk)("div",F,[t[4]||(t[4]=(0,s.Lk)("h2",{class:"text-lg font-bold text-primary"},"Quest Giornaliere",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.refreshQuests&&n.refreshQuests(...e)),class:(0,c.C4)(["bg-primary text-background rounded-full w-8 h-8 flex items-center justify-center hover:bg-secondary transition-colors duration-200",{"animate-spin":i.isLoading}])},t[3]||(t[3]=[(0,s.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)]),2)]),(0,s.Lk)("div",z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.quests,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"flex-1 bg-background rounded-lg p-2 border border-secondary cursor-pointer transition-all duration-300 hover:bg-accent hover:bg-opacity-10",onClick:t=>n.showQuestDetails(e)},[(0,s.Lk)("div",Y,[(0,s.Lk)("input",{type:"checkbox",checked:e.completed,onChange:t=>n.toggleQuest(e.id),onClick:t[1]||(t[1]=(0,o.D$)((()=>{}),["stop"])),class:"form-checkbox h-4 w-4 text-primary rounded border-secondary focus:ring-primary mr-2 mt-1"},null,40,B),(0,s.Lk)("div",K,[(0,s.Lk)("div",W,[(0,s.Lk)("p",J,(0,c.v_)(e.title),1),(0,s.Lk)("span",{class:(0,c.C4)(["text-xs font-semibold whitespace-nowrap",n.difficultyColor(e.difficulty)])},(0,c.v_)(n.getDifficultyLabel(e.difficulty)),3)]),(0,s.Lk)("div",Z,[(0,s.Lk)("span",ee,(0,c.v_)(e.skill),1)])])])],8,$)))),128))]),i.selectedQuest?((0,s.uX)(),(0,s.CE)("div",te,[(0,s.Lk)("div",ae,[(0,s.Lk)("h3",oe,(0,c.v_)(i.selectedQuest.title),1),(0,s.Lk)("p",se,(0,c.v_)(i.selectedQuest.description),1),(0,s.Lk)("div",re,[(0,s.Lk)("span",{class:(0,c.C4)(["text-xs font-semibold",n.difficultyColor(i.selectedQuest.difficulty)])},(0,c.v_)(n.getDifficultyLabel(i.selectedQuest.difficulty)),3),(0,s.Lk)("span",ie,(0,c.v_)(i.selectedQuest.skill),1)]),(0,s.Lk)("div",ne,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>i.selectedQuest=null),class:"bg-primary text-background rounded px-4 py-2 hover:bg-secondary transition-colors duration-200"},"Close")])])])):(0,s.Q3)("",!0)])}var ce={name:"QuestBoard",data(){return{quests:[],selectedQuest:null,habits:[],goals:[],isLoading:!1}},mounted(){this.loadGoals(),this.fetchHabits(),this.fetchQuests(),window.addEventListener("storage",this.handleStorageChange)},beforeUnmount(){window.removeEventListener("storage",this.handleStorageChange)},methods:{loadGoals(){const e=localStorage.getItem("userGoals");e&&(this.goals=JSON.parse(e))},handleStorageChange(e){"userGoals"===e.key&&this.loadGoals()},async fetchHabits(){try{const e=await X.A.get("/api/habits");this.habits=e.data.map((e=>e.titolo))}catch(e){console.error("Error fetching habits:",e)}},async fetchQuests(){this.isLoading=!0;try{const e=await X.A.get(`/api/get_latest_quests/${v.username}`);this.quests=e.data.quests,this.quests.length<3&&await this.generateNewQuests(3-this.quests.length)}catch(e){console.error("Error fetching quests:",e),e.response&&console.error("Error response:",e.response.data)}finally{this.isLoading=!1}},async generateNewQuests(e){try{const t=await X.A.post("/api/generate_quests",{habits:this.habits,goals:this.goals,count:e}),a=t.data.quests;console.log("Generated quests:",a);const o=a.map((e=>({title:e.title,description:e.description,difficulty:this.convertDifficultyToNumber(e.difficulty),skill:e.skill})));console.log("Formatted quests:",o);const s=await X.A.post("/api/save_generated_quests",{user_id:v.username,quests:o});this.quests=s.data.quests}catch(t){console.error("Error generating new quests:",t),t.response&&console.error("Error response:",t.response.data)}},async toggleQuest(e){try{const t=this.quests.find((t=>t.id===e));if(t){const e=await X.A.post(`/api/toggle_quest/${t.id}`);t.completed=e.data.completata,console.log(e.data.message)}}catch(t){console.error("Error toggling quest:",t)}},difficultyColor(e){switch(this.getDifficultyLabel(e)){case"EASY":return"text-green-600";case"MEDIUM":return"text-yellow-600";case"HARD":return"text-red-600";default:return"text-gray-600"}},getDifficultyLabel(e){return"number"===typeof e?e<=10?"EASY":e<=20?"MEDIUM":"HARD":e.toUpperCase()},convertDifficultyToNumber(e){switch(e.toLowerCase()){case"easy":return 10;case"medium":return 20;case"hard":return 30;default:return 10}},async refreshQuests(){this.isLoading=!0;try{await this.generateNewQuests(3)}catch(e){console.error("Error refreshing quests:",e)}finally{this.isLoading=!1}},showQuestDetails(e){this.selectedQuest=e}}};const de=(0,w.A)(ce,[["render",le],["__scopeId","data-v-949fbe2c"]]);var ue=de;const pe={class:"mb-4 bg-accent bg-opacity-20 shadow-lg rounded-lg p-4 border-2 border-secondary"},be={class:"flex items-center bg-background rounded-lg p-2 border border-secondary mb-3"},ge=["checked","onChange"],he={class:"flex-grow overflow-hidden"},fe={class:"flex justify-between items-start mb-1"},xe={class:"overflow-hidden"},me={class:"text-sm font-medium text-text truncate"},ke={class:"text-xs text-gray-500 break-words"},ye={class:"flex justify-end"},ve=["onClick"],Le={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},we={class:"bg-background rounded-lg p-4 w-80 border-4 border-secondary retro-shadow"},Ee={class:"flex justify-end"};function Ce(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("section",pe,[t[13]||(t[13]=(0,s.Lk)("h2",{class:"text-lg font-bold text-primary mb-3"},"Task Manager",-1)),(0,s.Lk)("div",be,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.newTask.titolo=e),onKeyup:t[1]||(t[1]=(0,o.jR)(((...e)=>r.addTask&&r.addTask(...e)),["enter"])),placeholder:"New Task",class:"w-1/4 bg-transparent border-none focus:outline-none text-text placeholder-text placeholder-opacity-50 mr-2"},null,544),[[o.Jo,r.newTask.titolo]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.newTask.descrizione=e),placeholder:"Description",class:"flex-grow bg-transparent border-none focus:outline-none text-text placeholder-text placeholder-opacity-50 mr-2"},null,512),[[o.Jo,r.newTask.descrizione]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.newTask.difficolta_xp=e),class:"bg-transparent border border-secondary rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary mr-2"},t[8]||(t[8]=[(0,s.Lk)("option",{value:10},"Easy",-1),(0,s.Lk)("option",{value:20},"Medium",-1),(0,s.Lk)("option",{value:30},"Hard",-1)]),512),[[o.u1,r.newTask.difficolta_xp]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.newTask.skill=e),class:"bg-transparent border border-secondary rounded px-2 py-1 text-sm text-text focus:outline-none focus:ring-1 focus:ring-primary mr-2"},t[9]||(t[9]=[(0,s.Fv)('<option value="GENERAL" data-v-b0d4913e>GEN</option><option value="CULTURE" data-v-b0d4913e>CULT</option><option value="SPORT" data-v-b0d4913e>SPORT</option><option value="WELLBEING" data-v-b0d4913e>WELL</option><option value="PRODUCTIVITY" data-v-b0d4913e>PROD</option><option value="CREATIVITY" data-v-b0d4913e>CREA</option><option value="SOCIAL" data-v-b0d4913e>SOC</option>',7)]),512),[[o.u1,r.newTask.skill]]),(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.addTask&&r.addTask(...e)),class:"bg-primary text-background rounded-full w-8 h-8 flex items-center justify-center hover:bg-secondary transition-colors duration-200"}," ➤ ")]),(0,s.bF)(o.F,{name:"task-list",tag:"div",class:"space-y-2"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.sortedTasks,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,c.C4)(["bg-background rounded-lg p-2 border border-secondary min-h-[64px] flex items-start transition-all duration-300 group hover:bg-accent hover:bg-opacity-10 relative",{"opacity-50":e.completata}])},[(0,s.Lk)("input",{type:"checkbox",checked:e.completata,onChange:t=>r.toggleTask(e),class:"form-checkbox h-4 w-4 text-primary rounded border-secondary focus:ring-primary mr-2 mt-1"},null,40,ge),(0,s.Lk)("div",he,[(0,s.Lk)("div",fe,[(0,s.Lk)("div",xe,[(0,s.Lk)("p",me,(0,c.v_)(e.titolo),1),(0,s.Lk)("p",ke,(0,c.v_)(e.descrizione),1)]),(0,s.Lk)("span",{class:(0,c.C4)(["text-xs font-semibold whitespace-nowrap ml-2 transition-opacity duration-300 group-hover:opacity-0",r.difficultyColor(e.difficolta_xp)])},(0,c.v_)(r.getDifficultyLabel(e.difficolta_xp)),3)]),(0,s.Lk)("div",ye,[(0,s.Lk)("span",{class:(0,c.C4)(["text-xs font-semibold transition-opacity duration-300 group-hover:opacity-0",r.skillColor(e.skill)])},(0,c.v_)(e.skill),3)])]),(0,s.Lk)("button",{onClick:t=>r.confirmDeleteTask(e),class:"absolute top-0 bottom-0 right-2 my-auto w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 retro-shadow"},t[10]||(t[10]=[(0,s.Lk)("span",{class:"retro-x"},"×",-1)]),8,ve)],2)))),128))])),_:1}),r.showDeleteConfirmDialog?((0,s.uX)(),(0,s.CE)("div",Le,[(0,s.Lk)("div",we,[t[11]||(t[11]=(0,s.Lk)("h3",{class:"text-lg font-bold text-primary mb-3"},"Confirm Deletion",-1)),t[12]||(t[12]=(0,s.Lk)("p",{class:"mb-4"},"Are you sure you want to delete this task?",-1)),(0,s.Lk)("div",Ee,[(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.deleteTask&&r.deleteTask(...e)),class:"bg-red-500 text-white rounded px-4 py-2 mr-2 hover:bg-red-600 transition-colors duration-200 retro-shadow"},"Delete"),(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.cancelDelete&&r.cancelDelete(...e)),class:"bg-gray-300 text-text rounded px-4 py-2 hover:bg-gray-400 transition-colors duration-200 retro-shadow"},"Cancel")])])])):(0,s.Q3)("",!0)])}var De=a(953),Te={name:"TaskManager",setup(){const e=(0,De.KR)({titolo:"",descrizione:"",difficolta_xp:10,skill:"GENERAL",utenti:v.username}),t=(0,De.KR)([]),a=(0,De.KR)(!1),o=(0,De.KR)(null),r=(0,s.EW)((()=>[...t.value].sort(((e,t)=>e.completata===t.completata?0:e.completata?1:-1)))),i=async()=>{try{const e=await X.A.get("/api/tasks");t.value=e.data}catch(e){console.error("Error fetching tasks:",e)}},n=async()=>{if(e.value.titolo.trim())try{await X.A.post("/api/add_task",e.value),await i(),e.value={titolo:"",descrizione:"",difficolta_xp:10,skill:"GENERAL",utenti:v.username}}catch(t){console.error("Error adding task:",t)}},l=async e=>{try{e.completata?await X.A.post(`/api/uncomplete_task/${e.id}`):await X.A.post(`/api/complete_task/${e.id}`),e.completata=!e.completata}catch(t){console.error("Error toggling task:",t)}},c=e=>{o.value=e,a.value=!0},d=async()=>{if(o.value)try{await X.A.delete(`/api/delete_task/${o.value.id}`),t.value=t.value.filter((e=>e.id!==o.value.id)),a.value=!1,o.value=null}catch(e){console.error("Error deleting task:",e)}},u=()=>{a.value=!1,o.value=null},p=e=>{switch(e){case 10:return"text-green-600";case 20:return"text-yellow-600";case 30:return"text-red-600";default:return"text-gray-600"}},b=e=>{switch(e){case"GENERAL":return"text-gray-600";case"CULTURE":return"text-blue-600";case"SPORT":return"text-green-600";case"WELLBEING":return"text-yellow-600";case"PRODUCTIVITY":return"text-purple-600";case"CREATIVITY":return"text-pink-600";case"SOCIAL":return"text-indigo-600";default:return"text-gray-600"}},g=e=>{switch(e){case 10:return"EASY";case 20:return"MEDIUM";case 30:return"HARD";default:return"UNKNOWN"}};return{newTask:e,tasks:t,sortedTasks:r,showDeleteConfirmDialog:a,taskToDelete:o,fetchTasks:i,addTask:n,toggleTask:l,confirmDeleteTask:c,deleteTask:d,cancelDelete:u,difficultyColor:p,skillColor:b,getDifficultyLabel:g}},mounted(){this.fetchTasks()}};const Ae=(0,w.A)(Te,[["render",Ce],["__scopeId","data-v-b0d4913e"]]);var _e=Ae;const He={class:"mb-4 bg-accent bg-opacity-20 shadow-lg rounded-lg p-4 border-2 border-secondary"},Se={class:"flex justify-between items-center mb-3"},Ie={key:0,class:"text-center text-gray-500"},Ne={key:1,class:"grid grid-cols-2 gap-3"},Pe={class:"flex items-start"},Re=["checked","onChange"],Ue={class:"flex-grow"},je={class:"flex justify-between items-start mb-1"},Oe={class:"font-medium text-text text-sm"},Me={key:0,class:"text-xs text-gray-500 break-words"},Xe={class:"flex justify-end mt-1"},Ge=["onClick"],Qe={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Ve={class:"bg-background rounded-lg p-4 w-80"},qe={class:"mb-2"},Fe={class:"flex justify-between"},ze=["onUpdate:modelValue"],$e={class:"flex justify-end"},Ye={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},Be={class:"bg-background rounded-lg p-4 w-80 border-4 border-secondary retro-shadow"},Ke={class:"flex justify-end"};function We(e,t,a,r,i,n){return(0,s.uX)(),(0,s.CE)("section",He,[(0,s.Lk)("div",Se,[t[9]||(t[9]=(0,s.Lk)("h2",{class:"text-lg font-bold text-primary"},"Habit Tracker",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddHabitDialog&&n.openAddHabitDialog(...e)),class:"bg-primary text-background rounded-full w-8 h-8 flex items-center justify-center hover:bg-secondary transition-colors duration-200"}," + ")]),0===i.habits.length?((0,s.uX)(),(0,s.CE)("div",Ie," No habits for today. ")):((0,s.uX)(),(0,s.CE)("div",Ne,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.habits,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"bg-background rounded-lg p-2 border border-secondary relative group transition-all duration-300 hover:bg-accent hover:bg-opacity-10"},[(0,s.Lk)("div",Pe,[(0,s.Lk)("input",{type:"checkbox",checked:e.completata,onChange:t=>n.toggleHabit(e),class:"form-checkbox h-4 w-4 text-primary rounded border-secondary focus:ring-primary mr-2 mt-1"},null,40,Re),(0,s.Lk)("div",Ue,[(0,s.Lk)("div",je,[(0,s.Lk)("span",Oe,(0,c.v_)(e.titolo),1),(0,s.Lk)("span",{class:(0,c.C4)(["text-xs font-semibold transition-opacity duration-300 group-hover:opacity-0",n.difficultyColor(e.difficolta_xp)])},(0,c.v_)(n.getDifficultyLabel(e.difficolta_xp)),3)]),e.descrizione?((0,s.uX)(),(0,s.CE)("p",Me,(0,c.v_)(e.descrizione),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Xe,[(0,s.Lk)("span",{class:(0,c.C4)(["text-xs text-secondary font-semibold transition-opacity duration-300 group-hover:opacity-0",n.skillColor(e.skill)])},(0,c.v_)(e.skill),3)])])]),(0,s.Lk)("button",{onClick:t=>n.confirmDeleteHabit(e),class:"absolute top-0 bottom-0 right-2 my-auto w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 retro-shadow"},t[10]||(t[10]=[(0,s.Lk)("span",{class:"retro-x"},"×",-1)]),8,Ge)])))),128))])),i.showAddHabitDialog?((0,s.uX)(),(0,s.CE)("div",Qe,[(0,s.Lk)("div",Ve,[t[14]||(t[14]=(0,s.Lk)("h3",{class:"text-lg font-bold text-primary mb-3"},"Add New Habit",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.newHabit.titolo=e),placeholder:"Habit Name",class:"w-full mb-2 p-2 border border-secondary rounded"},null,512),[[o.Jo,i.newHabit.titolo]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.newHabit.descrizione=e),placeholder:"Description (optional)",class:"w-full mb-2 p-2 border border-secondary rounded"},null,512),[[o.Jo,i.newHabit.descrizione]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.newHabit.difficolta_xp=e),class:"w-full mb-2 p-2 border border-secondary rounded"},t[11]||(t[11]=[(0,s.Lk)("option",{value:10},"Easy",-1),(0,s.Lk)("option",{value:20},"Medium",-1),(0,s.Lk)("option",{value:30},"Hard",-1)]),512),[[o.u1,i.newHabit.difficolta_xp]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.newHabit.skill=e),class:"w-full mb-2 p-2 border border-secondary rounded"},t[12]||(t[12]=[(0,s.Fv)('<option value="GENERAL" data-v-9fd73424>GEN</option><option value="CULTURE" data-v-9fd73424>CULT</option><option value="SPORT" data-v-9fd73424>SPORT</option><option value="WELLBEING" data-v-9fd73424>WELL</option><option value="PRODUCTIVITY" data-v-9fd73424>PROD</option><option value="CREATIVITY" data-v-9fd73424>CREA</option><option value="SOCIAL" data-v-9fd73424>SOC</option>',7)]),512),[[o.u1,i.newHabit.skill]]),(0,s.Lk)("div",qe,[t[13]||(t[13]=(0,s.Lk)("p",{class:"mb-1"},"Repeat on:",-1)),(0,s.Lk)("div",Fe,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],((e,t)=>(0,s.Lk)("label",{key:t,class:"flex items-center"},[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":e=>i.selectedDays[t]=e,class:"mr-1"},null,8,ze),[[o.lH,i.selectedDays[t]]]),(0,s.eW)(" "+(0,c.v_)(e),1)]))),64))])]),(0,s.Lk)("div",$e,[(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.addHabit&&n.addHabit(...e)),class:"bg-primary text-background rounded px-4 py-2 mr-2 hover:bg-secondary transition-colors duration-200"},"Add"),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddHabitDialog&&n.closeAddHabitDialog(...e)),class:"bg-gray-300 text-text rounded px-4 py-2 hover:bg-gray-400 transition-colors duration-200"},"Cancel")])])])):(0,s.Q3)("",!0),i.showDeleteConfirmDialog?((0,s.uX)(),(0,s.CE)("div",Ye,[(0,s.Lk)("div",Be,[t[15]||(t[15]=(0,s.Lk)("h3",{class:"text-lg font-bold text-primary mb-3"},"Confirm Deletion",-1)),t[16]||(t[16]=(0,s.Lk)("p",{class:"mb-4"},"Are you sure you want to delete this habit?",-1)),(0,s.Lk)("div",Ke,[(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.deleteHabit&&n.deleteHabit(...e)),class:"bg-red-500 text-white rounded px-4 py-2 mr-2 hover:bg-red-600 transition-colors duration-200 retro-shadow"},"Delete"),(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.cancelDelete&&n.cancelDelete(...e)),class:"bg-gray-300 text-text rounded px-4 py-2 hover:bg-gray-400 transition-colors duration-200 retro-shadow"},"Cancel")])])])):(0,s.Q3)("",!0)])}var Je={name:"HabitTracker",data(){return{habits:[],showAddHabitDialog:!1,showDeleteConfirmDialog:!1,habitToDelete:null,newHabit:{titolo:"",descrizione:"",difficolta_xp:10,skill:"GENERAL",giorni_ripetizione:"1111111",utenti:v.username},selectedDays:[!0,!0,!0,!0,!0,!0,!0]}},mounted(){this.fetchHabits()},methods:{async fetchHabits(){try{const e=await X.A.get("/api/habits");console.log("Habits response:",e.data),Array.isArray(e.data)?this.habits=e.data:(console.error("Unexpected response format:",e.data),this.habits=[])}catch(e){console.error("Error fetching habits:",e),this.habits=[]}},openAddHabitDialog(){this.showAddHabitDialog=!0},closeAddHabitDialog(){this.showAddHabitDialog=!1,this.resetNewHabit()},resetNewHabit(){this.newHabit={titolo:"",descrizione:"",difficolta_xp:10,skill:"GENERAL",giorni_ripetizione:"1111111",utenti:v.username},this.selectedDays=[!0,!0,!0,!0,!0,!0,!0]},async addHabit(){if(this.newHabit.titolo.trim()){this.newHabit.giorni_ripetizione=this.selectedDays.map((e=>e?"1":"0")).join("");try{const e=await X.A.post("/api/add_habit",this.newHabit);console.log("Habit added:",e.data),await this.fetchHabits(),this.closeAddHabitDialog()}catch(e){console.error("Error adding habit:",e.response?e.response.data:e.message)}}},async toggleHabit(e){try{const t=await X.A.post(`/api/toggle_habit/${e.id}`);console.log("Habit toggled:",t.data),e.completata=!e.completata}catch(t){console.error("Error toggling habit:",t)}},difficultyColor(e){switch(e){case 10:return"text-green-600";case 20:return"text-yellow-600";case 30:return"text-red-600";default:return"text-gray-600"}},getDifficultyLabel(e){switch(e){case 10:return"EASY";case 20:return"MEDIUM";case 30:return"HARD";default:return"UNKNOWN"}},skillColor(e){switch(e){case"GENERAL":return"text-gray-600";case"CULTURE":return"text-blue-600";case"SPORT":return"text-green-600";case"WELLBEING":return"text-yellow-600";case"PRODUCTIVITY":return"text-purple-600";case"CREATIVITY":return"text-pink-600";case"SOCIAL":return"text-indigo-600";default:return"text-gray-600"}},confirmDeleteHabit(e){this.habitToDelete=e,this.showDeleteConfirmDialog=!0},async deleteHabit(){if(this.habitToDelete)try{await X.A.delete(`/api/delete_habit/${this.habitToDelete.id}`),this.habits=this.habits.filter((e=>e.id!==this.habitToDelete.id)),this.showDeleteConfirmDialog=!1,this.habitToDelete=null}catch(e){console.error("Error deleting habit:",e)}},cancelDelete(){this.showDeleteConfirmDialog=!1,this.habitToDelete=null}}};const Ze=(0,w.A)(Je,[["render",We],["__scopeId","data-v-9fd73424"]]);var et=Ze,tt={name:"App",components:{AppHeader:C,LevelBar:V,QuestBoard:ue,TaskManager:_e,HabitTracker:et}};const at=(0,w.A)(tt,[["render",l]]);var ot=at;(0,o.Ef)(ot).mount("#app")}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,r){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],r=e[d][2];for(var n=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(e){return a.O[e](o[l])}))?o.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,s,r]}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,r,i=o[0],n=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(l)var d=l(a)}for(t&&t(o);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(6043)}));o=a.O(o)})();
//# sourceMappingURL=app.6a7c0149.js.map